{"ast":null,"code":"import { createSlice } from \"@reduxjs/toolkit\";\nconst initialState = {\n  totalPrice: 0,\n  items: []\n};\nexport const cartSlice = createSlice({\n  name: \"cart\",\n  initialState,\n  reducers: {\n    addItems: (state, action) => {\n      let find = state.items.find(p => {\n        return p.id === action.payload.id;\n      });\n\n      if (find) {\n        find.count++;\n      } else {\n        state.items.push({ ...action.payload,\n          count: 1\n        });\n      }\n\n      state.totalPrice = state.items.reduce((sum, item) => {\n        return item.price * item.count + sum;\n      }, 0);\n    },\n    minusItems: (state, action) => {\n      let find = state.items.find(p => {\n        return p.id === action.payload;\n      });\n\n      if (find && find.count <= 1) {\n        state.items = state.items.filter(p => p.id !== action.payload);\n      } else {\n        // state.items = [\n        //   ...state.items.filter((item) => item.id !== action.payload),\n        // ];\n        // state.totalPrice = 0;\n        find.count--;\n        state.totalPrice = state.items.reduce((sum, item) => {\n          return item.price * item.count + sum;\n        }, 0);\n      }\n    },\n    plusItems: (state, action) => {\n      let find = state.items.find(p => {\n        return p.id === action.payload;\n      });\n\n      if (find) {\n        find.count++;\n        state.totalPrice = state.items.reduce((sum, item) => {\n          return item.price * item.count + sum;\n        }, 0);\n      }\n    },\n    setClearCart: (state, action) => {\n      state.items = [];\n      state.totalPrice = 0;\n    },\n    removeItems: (state, action) => {\n      state.items = [...state.items.filter(item => item.id !== action.payload.id)];\n      let singlePrice = action.payload.price * action.payload.count;\n      state.totalPrice = state.totalPrice - singlePrice;\n    }\n  }\n});\nexport const selectCart = state => state.cart;\nexport const selectCartItem = id => state => state.cart.items.find(items => items.id === id);\nexport const {\n  addItems,\n  minusItems,\n  plusItems,\n  setClearCart,\n  removeItems\n} = cartSlice.actions;\nexport default cartSlice.reducer;","map":{"version":3,"names":["createSlice","initialState","totalPrice","items","cartSlice","name","reducers","addItems","state","action","find","p","id","payload","count","push","reduce","sum","item","price","minusItems","filter","plusItems","setClearCart","removeItems","singlePrice","selectCart","cart","selectCartItem","actions","reducer"],"sources":["/Users/dianasprakha/Desktop/pizza/front/src/redux/slices/cartSlice.js"],"sourcesContent":["import { createSlice } from \"@reduxjs/toolkit\";\n\nconst initialState = {\n  totalPrice: 0,\n  items: [],\n};\n\nexport const cartSlice = createSlice({\n  name: \"cart\",\n  initialState,\n  reducers: {\n    addItems: (state, action) => {\n      let find = state.items.find((p) => {\n        return p.id === action.payload.id;\n      });\n      if (find) {\n        find.count++;\n      } else {\n        state.items.push({ ...action.payload, count: 1 });\n      }\n      state.totalPrice = state.items.reduce((sum, item) => {\n        return item.price * item.count + sum;\n      }, 0);\n    },\n\n    minusItems: (state, action) => {\n      let find = state.items.find((p) => {\n        return p.id === action.payload;\n      });\n\n      if (find && find.count <= 1) {\n        state.items = state.items.filter((p) => p.id !== action.payload);\n\n       \n      } else {\n        // state.items = [\n        //   ...state.items.filter((item) => item.id !== action.payload),\n        // ];\n        // state.totalPrice = 0;\n\n        find.count--;\n        state.totalPrice = state.items.reduce((sum, item) => {\n          return item.price * item.count + sum;\n        }, 0);\n      }\n    },\n\n    plusItems: (state, action) => {\n      let find = state.items.find((p) => {\n        return p.id === action.payload;\n      });\n\n      if (find) {\n        find.count++;\n        state.totalPrice = state.items.reduce((sum, item) => {\n          return item.price * item.count + sum;\n        }, 0);\n      }\n    },\n\n    setClearCart: (state, action) => {\n      state.items = [];\n      state.totalPrice = 0;\n    },\n    removeItems: (state, action) => {\n      state.items = [\n        ...state.items.filter((item) => item.id !== action.payload.id),\n      ];\n      let singlePrice = action.payload.price * action.payload.count;\n      state.totalPrice = state.totalPrice - singlePrice;\n    },\n  },\n});\n\nexport const selectCart = (state) => state.cart;\n\nexport const selectCartItem = (id) => (state) =>\n  state.cart.items.find((items) => items.id === id);\n\nexport const { addItems, minusItems, plusItems, setClearCart, removeItems } =\n  cartSlice.actions;\n\nexport default cartSlice.reducer;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}